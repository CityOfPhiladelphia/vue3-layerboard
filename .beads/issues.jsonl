{"id":"vue3-layerboard-0db","title":"a11y: Add fieldset/radiogroup grouping to checkbox and radio sets","description":"LayerCheckboxSet.vue line ~109: div.layer-checkbox-set should be fieldset or div with role=\"group\" and aria-label. LayerRadioButtonSet.vue line ~110: div.layer-radio-set MUST have role=\"radiogroup\" with :aria-label (radiogroup is required for radio buttons per WCAG). Add visually hidden legend elements or aria-label props.","status":"closed","priority":2,"issue_type":"task","owner":"rothwell.andy@gmail.com","created_at":"2026-02-10T11:23:37.4134516-05:00","created_by":"rothwell.andy@gmail.com","updated_at":"2026-02-10T15:16:10.4667436-05:00","closed_at":"2026-02-10T15:16:10.4667436-05:00","close_reason":"Closed"}
{"id":"vue3-layerboard-110","title":"a11y: Add aria-live announcement for mobile panel switch","description":"Layerboard.vue lines ~755-763. Mobile toggle button switches between layers and map view. The result of pressing (view switch) is not announced. Add a visually hidden aria-live=\"polite\" region that announces \"Showing layers panel\" or \"Showing map\" when panel switches.","status":"closed","priority":2,"issue_type":"task","owner":"rothwell.andy@gmail.com","created_at":"2026-02-10T11:23:06.3957808-05:00","created_by":"rothwell.andy@gmail.com","updated_at":"2026-02-10T15:04:24.1566635-05:00","closed_at":"2026-02-10T15:04:24.1566635-05:00","close_reason":"fixed"}
{"id":"vue3-layerboard-2a7","title":"Fix layers showing Error when toggled","description":"Some layers show 'Error' when toggled on, likely due to CORS or server unavailability. Consider adding proxy for CORS-blocked services.","notes":"## Research Findings (2026-01-29)\n\n**Error flow:** MapPanel.vue → fetchFeaturesInBounds() fails → emits layer-error → Layerboard.vue stores in layerErrors → UI shows \"Error\" in red\n\n**Error sources:**\n- HTTP failures (403, 500, 429, etc.)\n- Network timeouts\n- DNS resolution failures\n- CORS issues (separate from csi bug)\n\n**Weak patterns identified:**\n- No retry logic after failures\n- No timeout handling for slow servers\n- Errors persist when layer is toggled off (stale errors not cleared)\n- Generic error messages don't distinguish failure types\n- No fallback/recovery mechanisms\n\n**Recommended fixes:**\n1. Add retry logic with exponential backoff for transient failures (503, 429, timeouts)\n2. Add timeout parameter to fetch calls\n3. Clear errors when layer is toggled off\n4. Improve error messages to distinguish CORS vs HTTP vs timeout\n5. Add optional \"retry\" button for failed layers\n6. Consider caching successfully loaded data per session\n\n**Relationship to csi:** Some errors may be CORS-related (tracked separately in vue3-layerboard-csi). This bug focuses on general error handling improvements.\n## Closed (2026-01-29)\n\n**Speculative issue.** This bead was created assuming CORS console errors would cause visible \"Error\" states in the UI. After investigation:\n\n1. The CORS errors are pre-existing (same in production legacy app)\n2. They don't affect functionality - just console noise\n3. No actual \"Error\" display has been observed in the layer UI\n\nThe error handling infrastructure exists and works correctly. If actual layer errors are observed in the future, a new bead can be created with specific reproduction steps.","status":"closed","priority":2,"issue_type":"task","owner":"rothwell.andy@gmail.com","created_at":"2026-01-28T10:23:54.6277867-05:00","created_by":"rothwell.andy@gmail.com","updated_at":"2026-01-29T14:00:44.3575441-05:00","closed_at":"2026-01-29T14:00:44.3575441-05:00"}
{"id":"vue3-layerboard-3pb","title":"Write vue3-layerboard documentation","description":"Write README and docs: explain what vue3-layerboard is, installation instructions, basic usage example (flat mode), topics mode example, link to example apps, API reference.","status":"open","priority":3,"issue_type":"task","owner":"rothwell.andy@gmail.com","created_at":"2026-01-28T10:24:46.292479-05:00","created_by":"rothwell.andy@gmail.com","updated_at":"2026-01-28T10:24:46.292479-05:00"}
{"id":"vue3-layerboard-4k9","title":"a11y: Add aria-label to popup table and escape HTML values in MapPanel.vue","description":"MapPanel.vue lines ~954-959. Popup table has no caption/aria-label. Add aria-label with the popup title. Also, feature property values from ArcGIS are injected into HTML without escaping - add an escapeHtml helper for \u0026, \u003c, \u003e, \" characters. This is both an a11y issue (4.1.1 valid HTML) and a security fix (XSS).","status":"closed","priority":2,"issue_type":"task","owner":"rothwell.andy@gmail.com","created_at":"2026-02-10T11:23:46.5612362-05:00","created_by":"rothwell.andy@gmail.com","updated_at":"2026-02-10T15:04:25.5264533-05:00","closed_at":"2026-02-10T15:04:25.5264533-05:00","close_reason":"fixed"}
{"id":"vue3-layerboard-4yx","title":"Publish vue3-layerboard to npm","description":"Publish framework as @phila/vue3-layerboard package. Start with beta release, test in separate project, then publish stable when ready.","status":"closed","priority":3,"issue_type":"task","owner":"rothwell.andy@gmail.com","created_at":"2026-01-28T10:25:02.4608449-05:00","created_by":"rothwell.andy@gmail.com","updated_at":"2026-02-10T16:49:44.9653107-05:00","closed_at":"2026-02-10T16:49:44.9653107-05:00","close_reason":"Closed"}
{"id":"vue3-layerboard-5ia","title":"Zoning Overlays layer freezes app - needs performance optimization","description":"The Zoning Overlays layer freezes the app when toggled on, likely due to complex polygon geometries overwhelming the browser.\n\nTried adding it to CLIP_TO_VIEWPORT_LAYER_IDS (viewport clipping with Turf.js bboxClip, same approach used for FEMA floodplain layers) but the layer stopped rendering entirely. Need to investigate why clipping fails for this layer — possibly the geometries are structured differently or the clipped result produces empty features.\n\nOther approaches to consider:\n- Geometry simplification before rendering\n- Feature count limiting\n- Using the layer's minScale (182366) more aggressively\n- Checking if the ArcGIS service supports quantization or generalization parameters\n","status":"open","priority":2,"issue_type":"task","owner":"rothwell.andy@gmail.com","created_at":"2026-02-12T11:52:52.3519615-05:00","created_by":"rothwell.andy@gmail.com","updated_at":"2026-02-12T11:53:32.2796083-05:00"}
{"id":"vue3-layerboard-5om","title":"Pictometry should move position when the address search bar is used","description":"When a user searches for an address using the address search bar, the Pictometry imagery viewer should update its position to match the searched location. Currently the map moves but Pictometry stays at its previous position.\n\nAlso: if Pictometry is closed, then the user searches an address, then reopens Pictometry, it should open at the newly searched location rather than the old position.","status":"closed","priority":2,"issue_type":"task","owner":"rothwell.andy@gmail.com","created_at":"2026-02-09T10:15:34.7176815-05:00","created_by":"rothwell.andy@gmail.com","updated_at":"2026-02-10T11:15:34.3105548-05:00","closed_at":"2026-02-10T11:15:34.3105548-05:00","close_reason":"fixed"}
{"id":"vue3-layerboard-6mr","title":"Replace title-attribute error tooltips with accessible text in LayerPanel, LayerCheckboxSet, LayerRadioButtonSet","description":"Error indicators on layers use the title attribute for tooltips (e.g., \"Layer failed to load\"). The title attribute is not reliably announced by screen readers — many ignore it entirely or only read it in specific browse modes.\n\n**Files to change:**\n- src/components/LayerPanel.vue\n- src/components/LayerCheckboxSet.vue\n- src/components/LayerRadioButtonSet.vue\n\n**What to do:**\nFind error indicator elements that rely on title=\"...\" for conveying error state. Replace or supplement with one of:\n1. Visible error text (preferred — e.g., a small \"(error)\" or warning icon with sr-only text)\n2. aria-label on the error element\n3. An aria-describedby pointing to visually-hidden text\n\nThe key requirement is that the error state must be programmatically discoverable by assistive technology without relying on title.\n","status":"closed","priority":2,"issue_type":"task","owner":"rothwell.andy@gmail.com","created_at":"2026-02-10T11:05:06.9269666-05:00","created_by":"rothwell.andy@gmail.com","updated_at":"2026-02-10T11:22:18.3600197-05:00","closed_at":"2026-02-10T11:22:18.3600197-05:00","close_reason":"fixed"}
{"id":"vue3-layerboard-7sp","title":"Add aria-hidden to decorative legend color swatches in LayerPanel, LayerCheckboxSet, LayerRadioButtonSet","description":"Legend color swatches (colored div elements next to layer names) are decorative — the layer name already provides the accessible text. Without aria-hidden=\"true\", screen readers announce these as empty or meaningless elements.\n\n**Files to change:**\n- src/components/LayerPanel.vue\n- src/components/LayerCheckboxSet.vue\n- src/components/LayerRadioButtonSet.vue\n\n**What to do:**\nFind elements with class .layer-legend-swatch (or similar colored div/span elements that display the legend color). Add aria-hidden=\"true\" to each one. These are purely visual indicators whose meaning is conveyed by the adjacent layer name text.\n","status":"closed","priority":2,"issue_type":"task","owner":"rothwell.andy@gmail.com","created_at":"2026-02-10T11:04:53.9645388-05:00","created_by":"rothwell.andy@gmail.com","updated_at":"2026-02-10T11:22:18.0052323-05:00","closed_at":"2026-02-10T11:22:18.0052323-05:00","close_reason":"fixed"}
{"id":"vue3-layerboard-7tx","title":"a11y: Add prefers-reduced-motion media query","status":"closed","priority":3,"issue_type":"task","owner":"rothwell.andy@gmail.com","created_at":"2026-02-10T15:26:58.5322315-05:00","created_by":"rothwell.andy@gmail.com","updated_at":"2026-02-10T16:15:24.0779683-05:00","closed_at":"2026-02-10T16:15:24.0779683-05:00","close_reason":"Closed"}
{"id":"vue3-layerboard-86h","title":"Fix mobile layout issues","description":"Both apps have mobile layout problems: 1) Headers get messed up by the large logo. 2) Footer completely disappears on phone and map runs off bottom. Solution: Footer should disappear and its items should go into a hamburger menu in the header where the large logo currently is in non-mobile.","status":"closed","priority":2,"issue_type":"task","owner":"rothwell.andy@gmail.com","created_at":"2026-01-28T10:24:28.7286529-05:00","created_by":"rothwell.andy@gmail.com","updated_at":"2026-01-28T17:07:06.2028474-05:00","closed_at":"2026-01-28T17:07:06.2028474-05:00","close_reason":"fixed"}
{"id":"vue3-layerboard-87p","title":"a11y: Add focus-visible styles to all interactive elements","description":"WCAG 2.1 AA compliance (deadline April 24, 2026).\n\nAll interactive elements in layerboard need visible focus indicators:\n- Use :focus-visible (not :focus) so mouse users don't see focus rings\n- Ensure sufficient contrast on focus outlines (WCAG requires 3:1 against adjacent colors)\n- Covers: layer checkboxes, group headers, any buttons, close/toggle controls\n","status":"closed","priority":2,"issue_type":"task","owner":"rothwell.andy@gmail.com","created_at":"2026-02-10T08:44:44.4068915-05:00","created_by":"rothwell.andy@gmail.com","updated_at":"2026-02-10T14:49:37.8469569-05:00","closed_at":"2026-02-10T14:49:37.8469569-05:00","close_reason":"fixed"}
{"id":"vue3-layerboard-8ft","title":"a11y: Fix sidebar outline:none to use focus style","description":"Layerboard.vue CSS ~line 1015. The sidebar has outline:none but receives programmatic focus via tabindex=\"-1\". Add .layerboard-sidebar:focus { outline: 2px solid #0f4d90; outline-offset: -2px; }. Use :focus not :focus-visible because programmatic focus may not trigger :focus-visible in all browsers.","status":"closed","priority":2,"issue_type":"task","owner":"rothwell.andy@gmail.com","created_at":"2026-02-10T11:24:05.223181-05:00","created_by":"rothwell.andy@gmail.com","updated_at":"2026-02-10T15:04:24.4918625-05:00","closed_at":"2026-02-10T15:04:24.4918625-05:00","close_reason":"fixed"}
{"id":"vue3-layerboard-8mv","title":"a11y: Focus management when panel opens/closes","description":"WCAG 2.1 AA compliance (deadline April 24, 2026).\n\nWhen the layerboard panel opens or closes, focus should be managed so keyboard/screen reader users aren't lost:\n- When panel opens: move focus to the panel or its first interactive element\n- When panel closes: return focus to the element that triggered the open (e.g. the toggle button)\n- Avoid focus trapping — users should be able to tab out of the panel\n","status":"closed","priority":2,"issue_type":"task","owner":"rothwell.andy@gmail.com","created_at":"2026-02-10T08:44:35.269104-05:00","created_by":"rothwell.andy@gmail.com","updated_at":"2026-02-10T14:49:37.5078544-05:00","closed_at":"2026-02-10T14:49:37.5078544-05:00","close_reason":"fixed"}
{"id":"vue3-layerboard-984","title":"a11y: Add scope=row to popup table th elements","status":"closed","priority":3,"issue_type":"task","owner":"rothwell.andy@gmail.com","created_at":"2026-02-10T15:26:47.7985386-05:00","created_by":"rothwell.andy@gmail.com","updated_at":"2026-02-10T16:15:23.6764214-05:00","closed_at":"2026-02-10T16:15:23.6764214-05:00","close_reason":"Closed"}
{"id":"vue3-layerboard-9xs","title":"a11y: Add skip-to-main-content link","description":"WCAG 2.1 AA compliance (deadline April 24, 2026).\n\nWhen the app loads, if a keyboard user hits Tab, the first focusable element should be a \"Skip to main content\" link that jumps past the header/controls to the main content area.\n\nReference implementation: vue3-atlas App.vue — an \u003ca href=\"#main\" class=\"skip-to-main-content-link\"\u003e positioned off-screen (left: -9999px, opacity: 0) that becomes visible on :focus (left: 0, top: 0, opacity: 1). Dark blue background (#0f4d90), white underlined text, z-index 999. Target is \u003cmain id=\"main\"\u003e.\n\nThis needs to be implemented in the consuming app (openmaps), not in layerboard itself, since layerboard is a panel component — but layerboard's panel should have a proper landmark role so the skip link can target content after it.\n","status":"closed","priority":2,"issue_type":"task","owner":"rothwell.andy@gmail.com","created_at":"2026-02-10T08:43:46.7614951-05:00","created_by":"rothwell.andy@gmail.com","updated_at":"2026-02-10T14:49:36.1507862-05:00","closed_at":"2026-02-10T14:49:36.1507862-05:00","close_reason":"fixed"}
{"id":"vue3-layerboard-9y9","title":"a11y: Add aria-label to legend ul elements","status":"closed","priority":3,"issue_type":"task","owner":"rothwell.andy@gmail.com","created_at":"2026-02-10T15:26:38.2250501-05:00","created_by":"rothwell.andy@gmail.com","updated_at":"2026-02-10T16:15:23.2993169-05:00","closed_at":"2026-02-10T16:15:23.2993169-05:00","close_reason":"Closed"}
{"id":"vue3-layerboard-9yf","title":"a11y: Fix nested aside landmarks - change LayerPanel root to div","description":"LayerPanel.vue line ~132 uses aside as root element, but it sits inside the aside in Layerboard.vue which already has aria-label=\"Map layers\". This creates confusing nested complementary landmarks. Change LayerPanel root from aside to div or section.","status":"closed","priority":2,"issue_type":"task","owner":"rothwell.andy@gmail.com","created_at":"2026-02-10T11:23:16.7242741-05:00","created_by":"rothwell.andy@gmail.com","updated_at":"2026-02-10T15:04:25.1763452-05:00","closed_at":"2026-02-10T15:04:25.1763452-05:00","close_reason":"fixed"}
{"id":"vue3-layerboard-auc","title":"Blue highlight desync when zooming after clicking overlapping points","description":"## Bug\n\nWhen multiple points on a layer overlap (zoomed out), clicking shows a popup that lets you navigate between them. The active point is correctly highlighted in blue.\n\nIf you then zoom in so the points separate spatially, you can still click through the popups for different points, but the blue highlight stops tracking which point the current popup is showing info for.\n\n## Repro\n\n1. Open a map with a point layer that has nearby points\n2. Zoom out until 2+ points visually overlap\n3. Click the overlapping points — popup appears with navigation between them\n4. Confirm blue highlight correctly follows which point's info is shown\n5. Zoom in until the points separate\n6. Click through the popup navigation — blue highlight no longer follows the active point\n\n## Expected\n\nBlue highlight should always indicate which point's info the popup is currently displaying, regardless of zoom level changes.\n","status":"closed","priority":2,"issue_type":"task","owner":"rothwell.andy@gmail.com","created_at":"2026-02-11T08:29:38.5095103-05:00","created_by":"rothwell.andy@gmail.com","updated_at":"2026-02-11T10:51:26.2414741-05:00","closed_at":"2026-02-11T10:51:26.2414741-05:00","close_reason":"Closed"}
{"id":"vue3-layerboard-ccs","title":"Add keyboard navigation to popup","description":"Arrow keys to cycle through features when popup is open (Left/Up = previous, Right/Down = next). Escape to close popup. Only active when popup is visible. Don't interfere with text input fields.","status":"closed","priority":2,"issue_type":"task","owner":"rothwell.andy@gmail.com","created_at":"2026-01-28T10:23:21.2286377-05:00","created_by":"rothwell.andy@gmail.com","updated_at":"2026-01-28T16:45:12.7877205-05:00","closed_at":"2026-01-28T16:45:12.7877205-05:00","close_reason":"fixed"}
{"id":"vue3-layerboard-cmm","title":"a11y: Add keyboard support to layer group headers","description":"WCAG 2.1 AA compliance (deadline April 24, 2026).\n\nLayer group headers (the clickable elements that expand/collapse groups) need to be operable via keyboard:\n- Focusable (tabindex or use a \u003cbutton\u003e)\n- Enter and Space should toggle expand/collapse\n- Arrow keys for navigating between groups (optional but nice)\n","status":"closed","priority":2,"issue_type":"task","owner":"rothwell.andy@gmail.com","created_at":"2026-02-10T08:44:15.146632-05:00","created_by":"rothwell.andy@gmail.com","updated_at":"2026-02-10T14:49:36.8277441-05:00","closed_at":"2026-02-10T14:49:36.8277441-05:00","close_reason":"fixed"}
{"id":"vue3-layerboard-csi","title":"Fix CORS errors for plowphl-services.phila.gov","description":"CORS errors appear in devtools for plowphl-services.phila.gov. The app seems to work but errors are present. Either server needs CORS headers enabled, or add proxy support in the framework.","notes":"## Research Findings (2026-01-29)\n\n**URL Clarification:** Could not find \"plowphl-services.phila.gov\" in codebase. Actual PlowPHL services are at `streetsgis.phila.gov/arcgis/rest/services/PlowPHL/*`\n\n**Services in use:**\n- Tiled layers: `https://streetsgis.phila.gov/arcgis/rest/services/PlowPHL/{service}/MapServer`\n- Data APIs: `stsweb.phila.gov`, `admin.phila.gov`\n\n**Impact:** CORS errors appear to be warnings only - raster tiles load via different browser rules than API calls. App functions despite console errors.\n\n**Root cause:** Philadelphia city servers don't have CORS headers configured.\n\n**Recommended solutions:**\n1. **Dev (short-term):** Add Vite proxy config to route API calls through local server\n2. **Prod (long-term):** Contact city IT to enable CORS headers, or implement backend proxy\n\n**Current framework limitation:** No built-in CORS handling or proxy support.\n## Closed (2026-01-29)\n\n**Not a bug.** The CORS errors for plowphl-services.phila.gov also appear in the production legacy StreetSmartPHL app (streetsmartphl.phila.gov). This is pre-existing server behavior, not something we introduced.\n\nThe functional PlowPHL layers are served from streetsgis.phila.gov (which has CORS configured). The WebMap references both servers, and the plowphl-services.phila.gov requests fail but don't affect functionality.\n\nClosing as \"works as expected\" - matches production behavior.","status":"closed","priority":2,"issue_type":"task","owner":"rothwell.andy@gmail.com","created_at":"2026-01-28T10:23:38.0294884-05:00","created_by":"rothwell.andy@gmail.com","updated_at":"2026-01-29T13:53:29.6816094-05:00","closed_at":"2026-01-29T13:53:29.6816094-05:00"}
{"id":"vue3-layerboard-dby","title":"Make layer loading message bigger and add spinner","description":"When a layer is loading, the loading message text is very small and easy to miss. Make the text slightly bigger and add a spinner/loading indicator alongside it.","status":"closed","priority":3,"issue_type":"task","owner":"rothwell.andy@gmail.com","created_at":"2026-02-12T10:31:12.2839788-05:00","created_by":"rothwell.andy@gmail.com","updated_at":"2026-02-12T11:42:15.0195415-05:00","closed_at":"2026-02-12T11:42:15.0195415-05:00","close_reason":"Closed"}
{"id":"vue3-layerboard-dps","title":"a11y: Add accessible name to metadata link in LayerPanel.vue","description":"LayerPanel.vue lines ~169-184. Metadata link contains only a decorative icon. The title attribute is the only text but title is NOT a reliable accessible name. Replace title=\"View metadata\" with :aria-label=\"'View metadata for ' + layer.config.title\".","status":"closed","priority":2,"issue_type":"task","owner":"rothwell.andy@gmail.com","created_at":"2026-02-10T11:23:26.9462069-05:00","created_by":"rothwell.andy@gmail.com","updated_at":"2026-02-10T15:04:24.8342912-05:00","closed_at":"2026-02-10T15:04:24.8342912-05:00","close_reason":"fixed"}
{"id":"vue3-layerboard-duk","title":"a11y: Add aria-hidden to decorative icons","description":"Three items: (a) Layerboard.vue line ~612 decorative header divider span needs aria-hidden=\"true\". (b) TopicAccordion.vue line ~68 font-awesome-icon in accordion header needs aria-hidden=\"true\". (c) LayerRadioButtonSet.vue legend symbols (lines ~177-198) missing aria-hidden=\"true\" that other components already have.","status":"closed","priority":2,"issue_type":"task","owner":"rothwell.andy@gmail.com","created_at":"2026-02-10T11:23:55.8770531-05:00","created_by":"rothwell.andy@gmail.com","updated_at":"2026-02-10T15:04:25.8661689-05:00","closed_at":"2026-02-10T15:04:25.8661689-05:00","close_reason":"fixed"}
{"id":"vue3-layerboard-e2x","title":"a11y: Add aria-label to modal dialog in Layerboard.vue","description":"Layerboard.vue line ~779. The modal has role=\"dialog\" and aria-modal=\"true\" but no accessible name. Add aria-label=\"Application information\" or aria-labelledby pointing to a heading inside the modal slot.","status":"closed","priority":2,"issue_type":"task","owner":"rothwell.andy@gmail.com","created_at":"2026-02-10T11:22:27.8285503-05:00","created_by":"rothwell.andy@gmail.com","updated_at":"2026-02-10T15:04:23.0741114-05:00","closed_at":"2026-02-10T15:04:23.0741114-05:00","close_reason":"fixed"}
{"id":"vue3-layerboard-ev6","title":"a11y: Add focus trap to mobile menu in Layerboard.vue","description":"Layerboard.vue lines ~631-649. Mobile menu has Escape to close and focus moves to close button on open, but no focus trap. User can Tab past the close button into content behind the overlay. Implement a keydown handler similar to handleModalKeydown that cycles Tab focus among focusable elements within .layerboard-mobile-menu.","status":"closed","priority":2,"issue_type":"task","owner":"rothwell.andy@gmail.com","created_at":"2026-02-10T11:22:36.9722383-05:00","created_by":"rothwell.andy@gmail.com","updated_at":"2026-02-10T15:04:23.4192527-05:00","closed_at":"2026-02-10T15:04:23.4192527-05:00","close_reason":"fixed"}
{"id":"vue3-layerboard-fcg","title":"a11y: Add aria-expanded to sidebar toggle button in Layerboard.vue","description":"Layerboard.vue lines ~738-750. Sidebar toggle button has static aria-label=\"Toggle sidebar\" and no aria-expanded. Add :aria-expanded=\"\\!sidebarCollapsed\" and change to dynamic label :aria-label=\"sidebarCollapsed ? 'Expand sidebar' : 'Collapse sidebar'\".","status":"closed","priority":2,"issue_type":"task","owner":"rothwell.andy@gmail.com","created_at":"2026-02-10T11:22:55.4360826-05:00","created_by":"rothwell.andy@gmail.com","updated_at":"2026-02-10T15:04:23.7872186-05:00","closed_at":"2026-02-10T15:04:23.7872186-05:00","close_reason":"fixed"}
{"id":"vue3-layerboard-g01","title":"a11y: Unavailable layer text #999 fails WCAG contrast minimum","status":"closed","priority":2,"issue_type":"bug","owner":"rothwell.andy@gmail.com","created_at":"2026-02-10T15:26:28.5167879-05:00","created_by":"rothwell.andy@gmail.com","updated_at":"2026-02-10T16:15:22.9398469-05:00","closed_at":"2026-02-10T16:15:22.9398469-05:00","close_reason":"Closed"}
{"id":"vue3-layerboard-gpf","title":"Add semi-transparent gray fill to all polygon highlights","description":"## Problem\r\n\r\nWhen clicking a polygon feature, the highlight only shows a cyan border. The original openmaps app shows both a blue border AND a semi-transparent gray fill over the polygon area, for all polygon layers (whether they already have a fill color or not).\r\n\r\n## Fix\r\n\r\nAlways add a semi-transparent gray fill (roughly rgba(128,128,128,0.5)) to polygon highlights, in addition to the existing cyan border. No conditional logic — every polygon highlight gets the fill.\r\n\r\n## Where the code lives\r\n\r\n- Highlight layer setup: `src/components/MapPanel.vue` around lines 1014-1243\r\n- `createHighlightGeoJSON()` handles Polygon/MultiPolygon by extracting outer ring as LineString\r\n- Need to also pass the original polygon geometry to a new fill highlight source/layer\r\n- Template has CircleLayer and LineLayer for highlights — need a FillLayer too","status":"closed","priority":2,"issue_type":"task","owner":"rothwell.andy@gmail.com","created_at":"2026-02-11T11:32:18.460397-05:00","created_by":"rothwell.andy@gmail.com","updated_at":"2026-02-13T10:12:04.025255-05:00","closed_at":"2026-02-13T10:12:04.025255-05:00","close_reason":"Closed"}
{"id":"vue3-layerboard-j0e","title":"Census Block Groups popup shows field names but all values are empty","description":"## Problem\r\n\r\nCensus Block Groups layer popup shows field names (BLKGRPCE, GEOID, STATEFP, COUNTYFP, TRACTCE) but all values display as dashes (empty). The data is not connecting to the popup template.\r\n\r\n## Possible causes\r\n\r\n- Field name case mismatch (ArcGIS webmap popupInfo uses uppercase, f=geojson returns lowercase) — similar to the Air Management fix in commit 29a8db1, but that fix may not be covering this layer\r\n- Data not being fetched or stored in layerData for this layer\r\n- Feature properties not matching the popup field references\r\n\r\n## Where to investigate\r\n\r\n- `transformPopupConfig` in the popup code — does it lowercase field names for this layer?\r\n- The ArcGIS webmap config for Census Block Groups — what fields does it reference?\r\n- The actual GeoJSON response — what field names come back?\r\n- `queryRenderedFeatures` result — does the clicked feature have properties at all?","status":"closed","priority":2,"issue_type":"bug","owner":"rothwell.andy@gmail.com","created_at":"2026-02-11T11:47:44.934505-05:00","created_by":"rothwell.andy@gmail.com","updated_at":"2026-02-13T10:12:03.6668216-05:00","closed_at":"2026-02-13T10:12:03.6668216-05:00","close_reason":"Closed"}
{"id":"vue3-layerboard-j3v","title":"Cyclomedia should move position when the address search bar is used","description":"When a user searches for an address using the address search bar, the Cyclomedia street-level viewer should update its position to match the searched location. Currently the map moves but Cyclomedia stays at its previous position.\n\nAlso: if Cyclomedia is closed, then the user searches an address, then reopens Cyclomedia, it should open at the newly searched location rather than the old position.","status":"closed","priority":2,"issue_type":"task","owner":"rothwell.andy@gmail.com","created_at":"2026-02-09T10:07:11.8995178-05:00","created_by":"rothwell.andy@gmail.com","updated_at":"2026-02-10T11:15:21.7148491-05:00","closed_at":"2026-02-10T11:15:21.7148491-05:00","close_reason":"fixed"}
{"id":"vue3-layerboard-js3","title":"a11y: Add aria-expanded to layer group expand/collapse","description":"WCAG 2.1 AA compliance (deadline April 24, 2026).\n\nLayer groups in the layerboard panel can be expanded/collapsed. The clickable header element needs aria-expanded=\"true\"/\"false\" to communicate state to screen readers. Should toggle when the group is opened/closed.\n","status":"closed","priority":2,"issue_type":"task","owner":"rothwell.andy@gmail.com","created_at":"2026-02-10T08:43:56.2155-05:00","created_by":"rothwell.andy@gmail.com","updated_at":"2026-02-10T14:49:36.4836499-05:00","closed_at":"2026-02-10T14:49:36.4836499-05:00","close_reason":"fixed"}
{"id":"vue3-layerboard-ks5","title":"Fix StreetSmartPHL layer panel overflow-y scroll","description":"The layer panel in StreetSmartPHL does not scroll correctly when content overflows vertically.","status":"closed","priority":2,"issue_type":"task","owner":"rothwell.andy@gmail.com","created_at":"2026-01-28T10:24:10.5283641-05:00","created_by":"rothwell.andy@gmail.com","updated_at":"2026-01-28T16:45:12.4178904-05:00","closed_at":"2026-01-28T16:45:12.4178904-05:00","close_reason":"fixed"}
{"id":"vue3-layerboard-l7f","title":"Add Prettier and ESLint matching phila-ui-4 rules","description":"## Goal\r\nAdd `pnpm format`, `pnpm lint`, and verify `pnpm type-check` work in vue3-layerboard, using the same rules as phila-ui-4.\r\n\r\n## What to add\r\n\r\n### Prettier\r\n- Install `prettier` (^3.6.2)\r\n- Add `prettier.config.js` matching phila-ui-4: semi, trailingComma \"all\", double quotes, printWidth 120, tabWidth 2, no tabs, bracketSpacing, no bracketSameLine, arrowParens \"avoid\", endOfLine \"lf\", vueIndentScriptAndStyle false\r\n- Add scripts: `\"format\": \"prettier --write .\"` and `\"format:check\": \"prettier --check .\"`\r\n\r\n### ESLint\r\n- Install: `eslint` (^9.x), `@eslint/js`, `typescript-eslint`, `eslint-plugin-vue`, `eslint-config-prettier`, `globals`\r\n- Add `eslint.config.js` flat config matching phila-ui-4 (without storybook plugin):\r\n  - Ignores: *.d.ts, coverage, dist, node_modules\r\n  - Extends: eslint recommended, typescript-eslint recommended, vue flat/essential + flat/recommended, eslint-config-prettier\r\n  - Files: **/*.{ts,vue}\r\n  - Rules: vue/multi-word-component-names off, vue/no-v-html off, vue/order-in-components error, vue/attributes-order error, @typescript-eslint/no-unused-vars error (with ^_ ignore pattern)\r\n- Add scripts: `\"lint\": \"eslint src/**/*.{ts,vue}\"` and `\"lint:fix\": \"eslint src/**/*.{ts,vue} --fix\"`\r\n\r\n### Type-check\r\n- Already exists as `vue-tsc --build` — keep as-is (more correct for Vue project with project references)\r\n\r\n## Notes\r\n- Do NOT install eslint-plugin-storybook (layerboard doesn't use storybook)\r\n- Work on a new branch so it can be discarded if things go sideways\r\n","status":"closed","priority":2,"issue_type":"task","owner":"rothwell.andy@gmail.com","created_at":"2026-02-11T10:57:48.2220812-05:00","created_by":"rothwell.andy@gmail.com","updated_at":"2026-02-11T11:41:17.1460265-05:00","closed_at":"2026-02-11T11:41:17.1460265-05:00","close_reason":"Closed"}
{"id":"vue3-layerboard-ox3","title":"Migrate OpenMaps to use framework package","description":"Create branch in original openmaps repo, install @phila/vue3-layerboard, replace framework code with package imports, keep only app-specific config, test and deploy.","status":"closed","priority":3,"issue_type":"task","owner":"rothwell.andy@gmail.com","created_at":"2026-01-28T10:25:19.1237215-05:00","created_by":"rothwell.andy@gmail.com","updated_at":"2026-02-10T16:48:55.2252962-05:00","closed_at":"2026-02-10T16:48:55.2252962-05:00","close_reason":"Closed"}
{"id":"vue3-layerboard-phe","title":"Keyboard arrows wrap around popup features but buttons don't","description":"## Bug\n\nWhen a popup shows multiple overlapping features, next/prev buttons are hidden at the boundaries — no \"next\" on the last feature, no \"previous\" on the first. But keyboard arrow keys still wrap around (past last → back to first, past first → back to last).\n\nKeyboard navigation should respect the same boundaries as the buttons. When on the last feature, right arrow should do nothing. When on the first, left arrow should do nothing.\n\n## Rationale\n\nThe buttons were intentionally removed at boundaries. Letting keyboard bypass that creates inconsistent UX — users get different behavior depending on input method.\n","status":"closed","priority":3,"issue_type":"task","owner":"rothwell.andy@gmail.com","created_at":"2026-02-11T08:39:15.5485868-05:00","created_by":"rothwell.andy@gmail.com","updated_at":"2026-02-11T08:41:59.2979811-05:00","closed_at":"2026-02-11T08:41:59.2979811-05:00","close_reason":"Closed"}
{"id":"vue3-layerboard-qlg","title":"a11y: Add proper labels and aria-checked to layer checkboxes","description":"WCAG 2.1 AA compliance (deadline April 24, 2026).\n\nLayer checkboxes in the panel need:\n- Proper \u003clabel\u003e elements associated with each checkbox (or aria-label)\n- aria-checked reflecting toggle state\n- Labels should include the layer name so screen readers announce what's being toggled\n","status":"closed","priority":2,"issue_type":"task","owner":"rothwell.andy@gmail.com","created_at":"2026-02-10T08:44:05.6379166-05:00","created_by":"rothwell.andy@gmail.com","updated_at":"2026-02-10T14:49:37.1646959-05:00","closed_at":"2026-02-10T14:49:37.1646959-05:00","close_reason":"fixed"}
{"id":"vue3-layerboard-rfm","title":"Migrate StreetSmartPHL to use framework package","description":"Create vue3-streetsmartphl repo, install @phila/vue3-layerboard, create topic Vue components, migrate from old Vue 2 layerboard patterns, test and deploy.","status":"closed","priority":3,"issue_type":"task","owner":"rothwell.andy@gmail.com","created_at":"2026-01-28T10:25:36.3872897-05:00","created_by":"rothwell.andy@gmail.com","updated_at":"2026-02-10T17:02:24.691448-05:00","closed_at":"2026-02-10T17:02:24.691448-05:00","close_reason":"Closed"}
{"id":"vue3-layerboard-tpi","title":"a11y: Add landmark role and aria-label to panel","description":"WCAG 2.1 AA compliance (deadline April 24, 2026).\n\nThe layerboard panel needs:\n- A landmark role (e.g. role=\"region\" or \u003cnav\u003e) so screen readers can identify and skip to/past it\n- An aria-label describing the panel (e.g. \"Map layer controls\")\n- This helps keyboard users navigate the page structure and supports the skip-to-main-content link pattern\n","status":"closed","priority":2,"issue_type":"task","owner":"rothwell.andy@gmail.com","created_at":"2026-02-10T08:44:24.5980658-05:00","created_by":"rothwell.andy@gmail.com","updated_at":"2026-02-10T14:49:35.8077437-05:00","closed_at":"2026-02-10T14:49:35.8077437-05:00","close_reason":"fixed"}
{"id":"vue3-layerboard-up1","title":"a11y: Add aria-live for loading/error state changes","description":"Affects Layerboard.vue (lines ~662-677, loading/error/loaded transitions via v-if), LayerPanel.vue (lines ~205-217, layer loading/error indicators), LayerCheckboxSet.vue (lines ~132-141), LayerRadioButtonSet.vue (lines ~133-142). Add role=\"status\" to loading and error span elements so screen readers announce state changes. For Layerboard.vue, wrap the loading/error area with aria-live=\"polite\" or add a visually hidden live region.","status":"closed","priority":2,"issue_type":"task","owner":"rothwell.andy@gmail.com","created_at":"2026-02-10T11:22:46.1722759-05:00","created_by":"rothwell.andy@gmail.com","updated_at":"2026-02-10T15:16:10.815623-05:00","closed_at":"2026-02-10T15:16:10.815623-05:00","close_reason":"Closed"}
{"id":"vue3-layerboard-ups","title":"Add for/id pairing between opacity label and range input in LayerPanel, LayerCheckboxSet, LayerRadioButtonSet","description":"The opacity slider has a visual \u003clabel class=\"opacity-label\"\u003e element as a sibling of the \u003cinput type=\"range\"\u003e, but they are not programmatically associated via for/id. Screen readers already get the accessible name from aria-label on the input, so this is low priority, but proper label association is better practice and gives users a larger click target.\n\n**Files to change:**\n- src/components/LayerPanel.vue\n- src/components/LayerCheckboxSet.vue\n- src/components/LayerRadioButtonSet.vue\n\n**What to do:**\n1. Add a unique id to each opacity \u003cinput type=\"range\"\u003e (e.g., id=\"opacity-slider-{layerId}\" or similar, using a dynamic value to avoid collisions when multiple sliders exist)\n2. Add a matching for=\"opacity-slider-{layerId}\" to the \u003clabel class=\"opacity-label\"\u003e element\n3. Keep the existing aria-label on the input — the for/id pairing supplements it, doesn't replace it\n","status":"closed","priority":2,"issue_type":"task","owner":"rothwell.andy@gmail.com","created_at":"2026-02-10T11:05:18.0840731-05:00","created_by":"rothwell.andy@gmail.com","updated_at":"2026-02-10T11:22:18.7067287-05:00","closed_at":"2026-02-10T11:22:18.7067287-05:00","close_reason":"fixed"}
{"id":"vue3-layerboard-vee","title":"PlowPHL layers get fuzzy when zooming in - missing scale-based layer switching","description":"## Problem\nIn the streetsmartphl example, PlowPHL layers (Treated Street Status, etc.) look correct when zoomed out, but when zooming in the layer becomes fuzzy/pixelated. The graphics don't re-render at higher resolution - they just scale up the low-zoom tiles.\n\n## Root Cause\nThe vue3-layerboard implementation only uses tiled MapServer endpoints at all zoom levels. The legacy StreetSmartPHL app has a two-layer approach that switches between:\n- **zoomOut** (`tiled: true`): MapServer `/tile/` endpoint - fast, pre-cached tiles\n- **zoomIn** (`tiled: false`): Dynamic WebMap layers fetched from ArcGIS with full resolution\n\nThe legacy app gets `minScale`/`maxScale` from the ArcGIS REST API for each layer, watches the current map scale, and automatically swaps between the tiled and dynamic versions based on zoom level.\n\n## Affected Layers\nAll PlowPHL tiled layers in `examples/streetsmartphl/src/App.vue` (lines 193-224):\n- plowTreatedStreetsStatus\n- plowNotTreatedStreets  \n- plowConditional\n- plowHighways\n\nURLs: `https://streetsgis.phila.gov/arcgis/rest/services/PlowPHL/{service}/MapServer`\n\n## Fix Required\nImplement the same two-layer approach with scale-based switching that the legacy app has:\n\n1. For each PlowPHL layer, define two versions:\n   - zoomOut: current tiled MapServer approach\n   - zoomIn: dynamic WebMap layer (need to find/add these to a WebMap or use /export/ endpoint)\n\n2. Fetch layer definitions with minScale/maxScale from ArcGIS REST API\n\n3. Watch map scale changes and toggle between the two layer versions based on the scale thresholds\n\n## Reference\nLegacy implementation in StreetSmartPHL:\n- `src/topics/plow.js` - topic-tiled-layers config with zoomIn/zoomOut pairs\n- `src/components/TopicTiledLayers.vue` - handles the switching logic\n- `src/components/Checkbox.vue` - shouldBeDisabled() checks minScale/maxScale\n\n## Testing Notes\nRequires an active snow event to test. May need to mock the storms API response to simulate a deployment.","notes":"**Mock in place for testing:** Line 530 in `examples/streetsmartphl/src/App.vue` has been changed to default to 'Full Deployment' when no storm data exists. This allows testing PlowPHL layers without an active snow event. Revert this line before committing any fix:\n```typescript\n// Current (mocked):\nreturn stormsData?.Deployment || 'Full Deployment'  // MOCK: remove before committing\n\n// Original:\nreturn stormsData?.Deployment || ''\n```\n## Implementation Complete (2026-01-29)\n\nScale-based layer switching implemented on branch `wip/plowphl-zoom-fix`:\n- Layers with `scaleBasedRendering: true` fetch MapServer metadata for scale thresholds\n- Zoomed out: uses /tile/ endpoint (fast, cached)\n- Zoomed in: uses /export/ endpoint (dynamic, sharp)\n\n**Testing limitation:** Can't fully verify without active snow event. Export requests return 200 OK but images are empty (no current data on server). Mock removed - awaiting next snow event to verify.","status":"open","priority":2,"issue_type":"bug","owner":"rothwell.andy@gmail.com","created_at":"2026-01-29T12:57:20.0734585-05:00","created_by":"rothwell.andy@gmail.com","updated_at":"2026-01-29T14:02:39.6851907-05:00"}
{"id":"vue3-layerboard-vtj","title":"Offset popup placement so it doesn't obscure clicked feature","description":"Currently the popup is placed exactly at the click coordinates, which means it sits directly on top of the clicked feature and obscures it. The old (Vue 2) version offset the popup upward by some pixels so the popup's pointer/tail was near the click point but the popup body was above it. That made it much easier to see the feature you selected (e.g. a planning district polygon). Should add a vertical offset so the popup doesn't cover the thing you just clicked.","status":"closed","priority":3,"issue_type":"task","owner":"rothwell.andy@gmail.com","created_at":"2026-02-12T09:55:22.2328703-05:00","created_by":"rothwell.andy@gmail.com","updated_at":"2026-02-12T10:33:57.2782418-05:00","closed_at":"2026-02-12T10:33:57.2782418-05:00","close_reason":"Closed"}
{"id":"vue3-layerboard-wax","title":"Census Block Groups - all blocks show as group 1, 2, or 3","description":"Census Block Groups - 2020 layer appears to only show block groups numbered 1, 2, or 3. All census block groups across the city display one of these three values, which seems wrong — there should be a much wider range of block group numbers. Investigate whether this is a data issue from the ArcGIS service, a popup field mapping problem, or a renderer/symbology issue in layerboard.","status":"closed","priority":3,"issue_type":"task","owner":"rothwell.andy@gmail.com","created_at":"2026-02-12T13:54:26.593089-05:00","created_by":"rothwell.andy@gmail.com","updated_at":"2026-02-13T10:13:23.0291768-05:00","closed_at":"2026-02-13T10:13:23.0291768-05:00","close_reason":"Closed"}
